<script>
  const params = new URLSearchParams(window.location.search);
  const oauthToken = params.get('oauth_token');
  const oauthVerifier = params.get('oauth_verifier');
  const code = params.get('code'); // 如果用 OAuth 2.0

  let schemeUrl = 'mgoshort://auth';
  const query = [];

  if (oauthToken) query.push(`oauth_token=${encodeURIComponent(oauthToken)}`);
  if (oauthVerifier) query.push(`oauth_verifier=${encodeURIComponent(oauthVerifier)}`);
  if (code) query.push(`code=${encodeURIComponent(code)}`);

  if (query.length) {
    schemeUrl += '?' + query.join('&');
  }

  // 自动跳转
  setTimeout(() => {
    window.location.href = schemeUrl;
  }, 500);

  // 按钮兜底
  document.body.innerHTML += `<p><a href="${schemeUrl}">打开应用</a></p>`;
</script>
